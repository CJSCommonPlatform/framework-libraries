dist: trusty
sudo: required
language: java
jdk:
- oraclejdk8
git:
  depth: 3
cache:
  directories:
  - "$HOME/.m2"
services:
- postgresql
before_script:
- psql -c 'create database frameworkeventstore;' -U postgres
- psql -c 'create database frameworkviewstore;' -U postgres
- psql -c 'create database frameworkfilestore;' -U postgres
- psql -c 'create database frameworkjobstore;' -U postgres
- psql -c "CREATE USER framework WITH PASSWORD 'framework';" -U postgres
addons:
  postgresql: '9.5'
  sonarcloud:
    organization: cjscommonplatform
    token:
      secure: i50CqjU8DRO2C1za1yv+LgjQ21uO/+pM/ROVaTX7M6s3eTO6Si9yNZ7OdSWnHxlAs5YcJwYzmm7SpjwKtZ/VjP1b6p6/6aETt7OtiqF57ivUZSA2zsNyS4qGXtIh4BcS7MURaLNEHDbzrEHXk903DRb8n3BCtwsQJk1j15LbTiriwygDeNN6x33AYRVjrP5JbzdWfQqpU+bfNfbfVpLRtZ8txF7ijiSG10b3dZV8C5vQJSv7G9BXk7X9piZRsH3YSMCeJoY/ZKyK2P39OSh2tgsrB9shlkiZpT4GDgdoVFMMV2MVNkBP+EU61vvxgEgqEM/3+GtrB1lcn9ukqBmRXAoEcbP2cCepllaK4xVCxfEfzIPKUJ4KvWQvD/trWK/dlkF6w+2BupqldtR1qSuVSw9GYDLjdrM/lI1n8gI8prglUaj4TdaAXvTkncG6pKO+PVd89xqL2ioKrHh30+VUI6Ns6IRcLT4R8W4mIWM7yoq/PmCkitRQ5ApyXqX0d5LBEp4sC6t1282mhD4NWfvptxdFxJDDYIjW8277ntuVhhfH5Rhe7M2TfG4PJEuO8/TB0e9DQ2+dTB16MhRkAtM6IMSwdMPXMKgGfPmBiy0kPYlJc5KOW3VHewu0iArKigB1NAvoy2xb82TIgMZVSkosjhP0gZTsvNDFDEys84wC9xo=
    github_token:
      secure: HktgoZh9K0HkuI2DPZXTUnYbe6uNiMZBxK9X6mZ+mk0DzkTTDGyhZ5B/7L2/wjDsH9Ok0hcHOWd7FupUcEh69HNrH6wu9JM574xzLlkCJmkd3Ej5xykOtOvlytIqFik7+jcrYqmuP6JtOrVpXm44F5htjsc6Kaq14ugENenpQs21CwXHV6XtvDRZ69t2r8UwvsaK0bEn4mIo/lIM8fYRqHzvFBl6GrBSPi8drTB9HH1IRoKWLOvFQA8/TTQqQVkHiaHxCrLPLr8jmbj1x3/UnKCvtx7XnsAFpNobG80VKGzNRqoXoQCPuShlDYORvslLKd11qDDg7u87lksS5eM5Ombk7LW1OpV+T+7PFSebDF4QZWdOmu1bhpzt3cxHaGcI6o8iZQHoQLwThbfrbrWkOPLjQatDI3bYXbKHwpZHQY/+jNVahFYPAPHnpwQm70NWUF864jp1msKxXi0NtqABxRif5W0Fcp1Jo12/zhIZZLV8X6c59nem90Gd1jxuD4BghHiI96TlsusI64dt93/uV9SpqUG6GsHBpFYEhclzbytKF9kUT5uoOi764uaoM5q02UhcQ4IkrndkJ8Xu/erBD+2rt+kHM13HVa7FSgZps0QZbvhPVbBc4vJYd9mVVQ9DLprtYofaCZWPm+W9mx7O3M9zpv5Hd4oXLTYMMuLqeME=
before_install:
- git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
- ln -sfT ${PWD}/target/travis-settings/settings.xml ${HOME}/.m2/settings.xml
- ln -sfT ${PWD}/target/travis-settings/mvnw mvnw
- ln -sft ${PWD} ${PWD}/target/travis-settings/.mvn
install: "${PWD}/target/travis-settings/java/install.sh -e -q -DexcludeGroupIds=uk.gov.justice.service,uk.gov.justice.services"
script: "${PWD}/target/travis-settings/java/script-install.sh coveralls:report sonar:sonar"
after_success: "${PWD}/target/travis-settings/java/after_success.sh"
env:
  global:
  - PGPORT=5432
  - secure: pDzf0vcrsbhOXdOBWrObRl6eJmQFGS5wxDgIoiVhf/P7g68b0mzE3NCQRcFpPDlDJtY9hgb5mx4e/gEPdml/joi83AKTUz+drk6efYLJJ1+wLsL4Xm2USOlmlGARp4Wj8+kP4vjOiHUn5uGpEhWa2YCSUOjxXcF/gO3DThaU6BPGxvOCewj3fHOxB72CtZfaITd39qe2HtzCjRvJgFi4C+bqrDXu/CwuvqrnoxGEQk2rpiBge/hlNkdEPb4WwS6iE3pu3qVQj2bCjBSGH9dWh5qkHBFpqjTA2tHznmRVfaZ7xCnPQon9qN4/3M11rfpVnIyJAXWQA5rN6SUvgd0Uv5lRNqF6PlfwyOpBrk0eKbtqmY6dnRq+90mipSE/viD0iOZA1uwZprme9ImPpj8j4jnYPscT03nqV0Rbhbkj4OMzj6fQlHClPBvGfo+wXrzqj/wtE2+3D3Pc7TEGV7TaiXGHSeelEbw/J44pBk6q2ANYXmYPFjBHKthKjCrDEWc8ug0jj1KGMTmjwHGCjlY5Drh8nSKr0KYWRqeGQhReG92rVNIIlYP009ixK9nfx10nD1RcyZ3dPffzTOTIu3pXVNZWPv9LlC9Na2Gr8a+71muf/Xjj9eFK2cExOO0H83HAoJBM8SOtq/ldUhxdmDTqRfzdT0ZmKjEiK4oNdCOPfwo=
  - secure: nHIN+izRRHAauzc4XXvP/X4Ep9z3FSGJsyR83/5AA5BILzi2fzm4tfZD0IopQLmxOGLSQh4Ogr3VBDwyoJ5PlspW+84KJAu3dOKQyISlceHPNdhE54cWllpapqsGqp50rdwfu+nHmDXGdTGU0sGmVC3qjYDRSAns6qg8edg/feqei35ldj5iIV/0Mr6T835GjrJL9P2lAjFxVnW5CcoFQVbj+7IjSDclInxcBPJn5VOhVXBvBC1zTfINVtMjJ7mDXuLYKqCBBaXEg2bbELZ0wbDqn5Q8w8WvGs4wX48wvDb4qavYGqC4bEuQ541BCGdiA78DRxABpX3RrSrMhoMX+JMhjCUsgO+MNl8/09yegEbl2Ukmw47kq849nYhnENITpICG0eYIVfnYb4T79nv/mZIOjCt517IGCqyahVkNzBfdWcMDC2RhIWtoSqOMEKf6+e643aWXDVHTDBelewNcluUGBigCwzTyPzy472Fp9pJOumSAb9AWLaJZUNt8CxV1Jt/vyEX7MYJDmHjfQDvJRjZ1Z2DsykL0zm0/4cGX9SrRsAJ7Uv6KDj/hOy8Xa1/bZ+NZYJO7CVoI2kPJHhosYMSE21O+u5BauC4tBJFnjULkygSbHtJtURTW1g7yfy8V8a3Wj9IEr3zhgn+wpt91JHlQgaS9wx2SjTk0cnW3XJo=
  - secure: WYgMRCY4/IjxlPAoowU473RmL7FRrQcHpTnhbR0bWfDIhc7of5XnYjk+DvxEpBeOMayxGheKrPyEp/LCPUyqvk/QVz9LeufkfQoxQ0BhRNohVOyRQYA5rpn57zD/yBCQuSxwSuwgyM4l3tIoLOquO4qBZqK9fFNwn8C61+AmN7vord/2ZBtlmQdUmCTtWurnqgyoPhjfwJG+SFPXa+wZB/ltoV8XwbEGsiENkFE3pbSBRZ00aMVtS+27h6qLOPudSi5bthmzvLIDZdZRJCAjLMpV9BlemgLR76Uk9G0hh4G5WMYlg0KzPtlD8W7pV54FtZ48mVaXjr9RbGJ2TA/DwmR5YGRZ2vKli3XknJ/KH/OOr+E1Toj07CMBuzHGFE1c5XkWRIRNNgqVN7UtueFyCzd+r4Bcg4yUoRv/ePuig4HdrUIunVJi3yBDssOyutITakxbvy7Puv2VZqEjnCGsXMJmovKnJ+qyo2bkWhvl3g9wDdgDqcA7T/4cbsqKGJJ9JVw8TmtwOQ/FtErvcxZZVoU+Yvp4Vc8D7v7sfaQV42ZhhyQRA/WxbpzAH83zsUfiO+UutLjCNrLoAOtklFjE8XhY0KgIxKTG9Ebo9hh/uzZ++HgGDwWioFcbTvwKUUc1QIMFu1yTEhlb9B50/JJ0LBIQxPit+JLYCFU2fs+5Qg8=
  - secure: N8NZmRJ7EQfzbB3IDX/6HqmT10W0eHTJ1ZH1oKA+m3U7PKEOXDVPLNLx2lVBDfl+Ht+kYPANR9ASzRsR8hV0JTxclpMG7hAaI9uuV260l4y4DI08uIMKJ7THiYG2kg7OSHA/zSS7WHzF+xImaJdoPAft//zLGhQfvlAX8O2piB+Cjyoc59qzv7fPbdlljSkBjYvdECTqUB4skucCsmnjgd9HToeveoDMmBFqbVkZnbLSHkhlptPGyOXRPm58ZR8zDSgobQZKBrF3/nskJx6BU42g7PdlP3vEvzlH6sl5ZeXwXZObd/uWyvCzDIR3a2WKs/UgvdpC/QIknvNssGtstmeuR2mywGradqmYYQLlqowubDAdjZ6C2a7NbGcVsKSWFcV+URLi474eSQJioIOyEOKBBXPXBW9O2eX4mXGMMKmVrrZBtrZH5Jzy3LXAPZjG1ZlCHGBHopu01aNrkKKcIVxlkHGtOscpPmGL1faGsiNzTfbJgPqF4zYbWcrgk1NWl+mgxK3XPIGHWUHFDPMn1YjkUIZFf+UTg29ENNFiRljewW75v2cXQ7voHhaurP3YurwAkZojYgmJx1NdlZQFnfpx9EJKDwx+SVb/F2WAVfwasrgzxsOmUoCAH/+BHBuZTbifIWR7x8BGJ0AXQJC0W+5PDjLfQNzibixGe4J9ktA=
  - secure: ivkHeNEcA63reZr7f00Rv7YHBSJxjZX1QIm9RW0z7ILBveFwCRHYW3q4V952/+EzN+sqhHd4BDCrqKwKhS1pzy02Emo8LpYrcS9guSHkmELWrUf2EDFSj4FLnpCGo4owscI6H9IUt8p/DjS+AAbO3NGAyr5ywtrZSsIRrnL7RCX7tWgo+uebw2OOw4VYcqQwGmj/+UjXEBRn/RiOHoSTV1qCIzX675MnGjWhEEp6iMRzAr2qnmsfzf3RxXpXI+UozMEsnSp+tctYL4aIxXU9WUnUUrgLirN7b3kGiFy/wxJEXlVU2yTXSXujyE6fvGWHlv3QvQS36Lgi1Nb3iltbU7XaFjkB1Qem1/pAKp4JbmJgamSLkSIZaaIv1m43HiPiXOo225Gf6o0IIROYOTz1OMXefYmQTGa2k2c2f83VBwzSxMqMuZX0xTfQVYiLwEneDnu7egaWf9z0bYj0BgFUStGj5Ruco2iAGtqskG21kVvP/QjQLB7Sjw4+1PABy4qqoHJ5eMe2SkCjZc/UWVeWKfp5a4F8Y8O2/PXuNwZbiwHT25bOglbm1ZZVOkt/YSZvodGaLhYrxzT9oKRDRAAhcl5dCoKKLJBq6RW/NnqFomSeG3cKNdu6woFKCclio9ywjtONkJxJ417bOTWBV4xZ43gcqyylKNnHtsftydaIG4I=
  - secure: VA2sWwrXuTlII7vTRK1TVhOimmlG89mHKl9KRP1aAjT9aLv4LPCvyQBN7p8cgV5SLq9RSc5nqQdtZ4qrBr6hIbfbbaq44kF6VbezsUqMlgVUFeQYD0chRWfQUSa1FiUHrFhqn22DENgCWV9VynQcOY3Rp3fLwcac3uxu2Jw7sJG3mng76lhiVHt50yvAjmCVGNe55xfLG/sb3XDsWrAZ7u3w6XRTawmfTj4/m7ypBHo+mqoyzLjlqrHU+mGECLOCEAXySXYzZ3w06c9wFwrUkoyGbwGJOeR8wsYRkrggRTf7je7rIss3yC8uN1d05p5USOyInrZcJ7P5GxRI4MilIDD+JVyvEJs55Dc7CfLzuBo4+Y+z4EMXgm3KGfWrrHea7QzWdXbcujr7WaYofVya6StzrNrcSU42tscKMHVusPvOiTmzLBMvBfKcZPPK8s07bL8w6ed4R6CQsdGEvi5VWD4bAdq5epgNC8Oll9dE9GLPnwoceHeBTD4K2dkA3Z1QsPpMbJSJbpIEtMPNd7Mv2xvJ/rVzn4HmoIxS3mSRxgi+Ojl9OugcnAjKK3mMusjEqCtLPcBoZRwDXaCrlIF9TWz0Tn0ha1AEyAn8L+y+HP9l5jcF5opAm/0J8isWJqiBsrjRDz6FuKYwm6ol5YQ3tlM9K+DLwIbEyEew0oIcUhg=
