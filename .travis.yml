dist: trusty
sudo: required
language: java
jdk:
- oraclejdk8
git:
  depth: 3
cache:
  directories:
  - "$HOME/.m2"
services:
- postgresql
before_script:
- psql -c 'create database frameworkeventstore;' -U postgres
- psql -c 'create database frameworkviewstore;' -U postgres
- psql -c 'create database frameworkfilestore;' -U postgres
- psql -c 'create database frameworkjobstore;' -U postgres
- psql -c "CREATE USER framework WITH PASSWORD 'framework';" -U postgres
addons:
  postgresql: '9.5'
  sonarcloud:
    organization: cjscommonplatform
    token:
      secure: i6h/FnRoPpcCzdqihsBLAStK2/i+bh+0YoQ1q1kaJl5XtP8IrTNDifZelX2Zmw5gmIfaT5ly8FC9FwMSvcvpwM6Nd7ld+vtUnn7/xJayfE4AnTf1/411EfJ28ESjegEtWmeIGFQMVX1QPT2PmgzI8FLMJwLXUaFFzric5ELcD4Skik3bkJHv4OyNR84fp0U7ricUpWyXw1NZeZTvPMqhGG1aopu5/lzD6Y1cw7W4POrwb9iXIHRZmFEg8SPjCLRTnf00LltcNdJ+uzPYpkX13iakeLEDAhG05q5qYv9tjTIt4f0FpMg88ehb8y/B2E+RBlZv+HKYK37mPgvE37cIEjX/GHNbNxR4SvOOM67rM0xBlEj7LONPAhK+1RB+DTJ+Xz0CskRhKXvD10U+GndRu5IzhVMRlNbxJP5266SV6LFqO0vipaN/L3QbPdzcyBEpzE3nEQUSA6R9Cd5OrlKtCTr7jTpd0sD08v8x8O+yHIv8Xv3xAlGKRNF8CYDTkRMoaeBT7HvQCxyK3OVdnYwsc6J+efOqq6hZMgoSbyNBOhKleo2DpebUZK1b3s7FFXwbkX+8cMvLDWbX8pWpqnK+sRfXmQlYK7HFKfPJD63osTCOoDPDp7vCq+pi2/Ap3deq1vHthgSR7cL0iBxENgjgC7UD1HMqTnvEpvzM1HUgr7g=
    github_token:
      secure: BX6IFtlYfdiB3tJyC5eg0wVens8EZbJzZc43De3X9vuxX8SMzaV62pKvSh9njPHOhMqDMLA2OBNOPL1NtEC6ZucSsrUoouI8ucCpMUXav1bTF0VHNYfeytj74hAGnz3zHlC7n8K65LonD7+YfjmdfZxjjEVQfCBKKI2FNqmZRN9JC8V7+4NOcuPPz1mh3xne0UzjovnWBJXD7tpxj9IYy7om1acd6gooTIZE+xmtMKdpaT8V5L2adMFNcbDYYtexFQqO5jiSyN2mt9YXahMDIZ/QJH0BKy0zbihwvbccLCJyI8KtKebzm8BWQAEITo4BeHxpEbcA7QUf4+40rrBtAvAqnHOFtct69ieaaOhT/ABiuxzH+I2smWgfRk/f0fNjxcCLQyUOCt4tbbMYb5uzWeDFSW1F5w90uax5AWke1s1H6bXq7BD9EtyxqrrajcYpTMy8rOXGPOiOJLKUiC2SVgtLe5Q/fu7ikXf/bCsZo5syxS9zMw1izEv0acZ+aFAHlRkWf/iqdSh8a/fRALiKH5U8YNHfXnOBnBUi0IC3/hTirGGTjyx+Ug6Nx7EuQUBT+XLdYBwGcXkmsQo8cIuTA0jHlLJLvcC/cYmPglLwTX2PPcjIFm4REHgn29ABjV655lwXcW0tt0LvmhNvru4HMG8+cUl9vJgnqYUo21udx9w=
before_install:
- git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
- ln -sfT ${PWD}/target/travis-settings/settings.xml ${HOME}/.m2/settings.xml
- ln -sfT ${PWD}/target/travis-settings/mvnw mvnw
- ln -sft ${PWD} ${PWD}/target/travis-settings/.mvn
install: "${PWD}/target/travis-settings/java/install.sh -e -q -DexcludeGroupIds=uk.gov.justice.service,uk.gov.justice.services"
script: "${PWD}/target/travis-settings/java/script-install.sh coveralls:report sonar:sonar"
after_success: "${PWD}/target/travis-settings/java/after_success.sh"
env:
  global:
  - PGPORT=5432
  - secure: hYvbvNDpbDIVnbmgBmqbtpPmB/G1E5TKJVw+A/94OeLUzZ2iM7FTqFE2aItzhVXlIw0rVcoDSOxQxitOml8vMQFz/YhBs3ZNw4XUIqlasklDPkoUadto2gLIDuspnbsLFvU8pmulnh4hRDRfkQ7ub0/HXXYh6K8PnVaIHRoGHYIafcpXKDsPGeM2L8/FkZ/6Q/wOS6Ct2AqAKXuv4IrnfnHeIrLw5OUYiUmuDHxETZVhLBkedHHMripsM//qw9WsUw0VcydB4Jx5z6bq6PR6/o2pyBglRyIjKT5Au8jWAxMF2lr2twN9s1Z0VXg5rY4jLWHA0jtfBgnjgw+AVDGeEXdJwPf7enHwbR9JqCyw2nVUlxZVcNhaH4l1J04JXNN1Jt5Fz5/m7CTXPmISWoXv+XAn9aJRsONBaGuSdIADXRDfxPpZG6cZux6x+mFUbnteZxSEWsOuvbsrQeGoJRIvo7n3aL7+3/k2GKMyAvNCG8EELh9ABKAUFQNoFM+ksvbju7JE4Po/gFNYuUD9wpvyUnNH3fQaS1k8HRlO25Eg12jbvzNLshfr7LE1X332QbhzJiA8aIcAjVzX+tWpsQCH/VdLMGYuNGyutfg7W7CLmNRd7/D/2Wd2rksBs3iJFL+m6viIppfZjS5DWXQ4cRdtdIlcz9U7jeMNXAX7sut4S74=
  - secure: SRqGAz/mOhxa+BnnK3O+ROj9y9iKLSePNowAzaqFO/UNGXnZRzXMyttUnHWVbJAyNpRxj7T4ZMnu1EP595zD9a6cJWuCFcENj7WyO6pLrZm5Ua4cC66R28S4ltkR/noOMujiZzC5cmHW+I07ue5eqUQfvhDY0JkfTxwfI+Bp8McxeZGPxR3KjQ5Pc85myYJ9MimOl4gERLA5J4vgO9cQSBQU3mUoTF5EH/s9d9P59ouKbWC1wl0k5aP7ZzQ70aiCS4YZ1UJvjOmwwVjJ+z8l43jMlWs2QkNjDFb7bxykdxfZkshOreUIvSsvLTHICGTfH2EZAHxq/XxqkR+eFKp+cd540Lw6v/vbi2wIsdGYSgB04Y5X8HiY6kD0oIHlfl06trxKIhz71khMja2gIGUHOoriFOqTllYMmVv0v/vaA/iwEJE6bxRYtJWPpmTdG4hgjfA8PYiUuos2g/SnIG+8tpYJszCVHU3duT7r10F7iw3znInpEI+M0HjDkA1JxxwXMMycQU6gDuMvIJL6BNqwqudDafycVmlnogWrgG36Srh9Ld1fX3QAi3YUURL/DAVU8kTpf86P08Ln5tO66utl8H+5yCvqV/TO+sE1J5eZI2+o3fDPcgE6RqEqAhocbfSk1g9U0F29qBaqQctn2Pz/0xz6icoDRxM+dJmenMfVNng=
