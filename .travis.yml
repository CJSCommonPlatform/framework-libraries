language: java
jdk:
  - oraclejdk8
cache:
  directories:
    - "$HOME/.m2"
before_install:
  - git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
install:
  - cp -f $JAVA_HOME/jre/lib/security/cacerts target/travis-settings/cacerts
  - chmod u+w target/travis-settings/cacerts
  - $JAVA_HOME/jre/bin/keytool -import -v -noprompt -storepass changeit -storetype jks -trustcacerts -alias IndigoBlueRoot -file target/travis-settings/ROOT-CA.crt -keystore target/travis-settings/cacerts
script: mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -B -C -V -U --settings target/travis-settings/settings.xml verify coveralls:report
after_success:
  - '[[ $TRAVIS_BRANCH == "master" && $TRAVIS_PULL_REQUEST == "false" && $TRAVIS_TAG != release-* ]] && mvn -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
  - '[[ $TRAVIS_TAG == release-* ]] && mvn -Prelease -Djavax.net.ssl.trustStore=$PWD/target/travis-settings/cacerts -DskipTests=true -B -C -V --errors deploy --settings target/travis-settings/settings.xml'
notifications:
  slack:
    secure: "Ml7PRIH3nVt84qjik/jQ1pjJnXLPipvuUw5KHpMDyZrkDRkNtvnoeWep/SuBWGiGgwKBcL8Pi6QB4jTH8pYVuoUrqQ4Ah4cBQihYTAezMIw+xGulF0GvwwefigwKlZB8B73hUaEOUHqjIn19huJpstaw0PH8OF4rpWTbl+ZSTKtdyYZOS6NfgcctyqYNCtYC7/qkBah5jJDx1KEho2pDJthsMF9CxL/bckTm7Giy2W4ehAoeaeDtzTXKBuyv+CfH55XCE8Y/wyO4srXa7Ntefhqm5a4gmJ4A5CDF9UrjRickxPisJxCoRhl8Rm04IGvdEe1A4/dwkLIXodcMXPWSMY/hWfepFZ5Epm2w0I8pWOu0TwIuRrxEedBNM1aRmWa6iHFq8HJULmHrW3Sma6sCpi52GGxcrUbWF78kVS5Lv7K7LgkbWCDvFguIs7d0rc03DZkCBWl1J1e+RSNtaiiT6VNh+R8TDxUUQg5ke7SsUqDs6nZ5efewL+liFeg9k+j0GE4C5sg/oy+KRXGRhk8Yx2Q/SnIa3iKmBvrLPNQ7uzmcycCtT2kfwZ4D+6/7wpPKWiUqHlfPQP+TewepvMU/PQi1nMG6FrIE9L4B9Dh6nyzVT3Eag/mvwbhSTeQgLU5m1VJ4Pvrx4fNNsB1NzwWDtnnqkAQnwcXg9UGKA26qzwI="
env:
  global:
    - secure: "O+XNn6jqIFGc05mbt9Pbq+77sArwHfGIoMdd8C/r3/1ZnQbj+tfvzNX4tl/xEncSRIA95TrZ0a3Z/VHwqjEw1W8yOJiCz/xAsW0k6/Lqz5IOvB/G+jNyhMVbFh/hIttJ3O0JDsQ9UINsD5HxFKoPKCa+LAy3CaSutlTnlm/yQeFVCe/otovqpDf0IeW0DuR/WryovwdMrX4TO4CB4+eRZ1maHrFZ7Pkwq8FdTWhHFiABc7K+TKOeHJZ0kgfYHGTXQuUgHuz+F1ehdGq8fC3cWinY8E3UMJO7POfDDW5pd7kXhK/F2eZhwBnfSHn4MEW35zQaOvkZqn7dr/tthNA4wjLt8ttXGBRcL4C4tQxnqyNcnqKwDztSYInpALQLpTlzwJUggQeW9GQjRoPL8dtPCXI314NH2kTQMAxov4cq8rDPKsFLV2SyypndKxQKaarUJCTxRxVYN22GAuTG3BQNfoptC31MfXCrpTuB8g6+JVEgHKdHioco4rzThzzfXPwoxfWr7wshySC+lgefMPoQPx62OhCH2p5hgDIoOGxJUrWRvO70D38vCkNivhfBoJTIWJR2atBwF7IAJWyRGJzLTeDKsZqBOvKRbId3CHHmYNL6B2Tp9fSn3GFReg63FBxzY31zSQps014Wx5XX93VNGKdIn3O9ePFGpx1Fme534P4="
    - secure: "BKtf+xlcIBUPi2M9VfwNBmzrwQJg17whLkkXhWo2mx2ujcB6Z22iZnFuTyLRbga05QrSPoHy8IAc4OvxjVDTuE0mhkLNoiEeHq6tnJfvlPImfvv2dxn7uKi9d4/30nvwwuH5aPi/ybXc4kWy56+d/KKstP2hnajQ4fIRBRsBrAh9CgsuwqKudepDUPuSB3vpowgzDyS8X9NoIzHrMC9cshkeORK45NMA9vqWSEMuhlRR2O6bTwZ5s+2uwcdbUxC5lteeVZiLXhUbuLgcrYSaNJpM2J4Ed6+KD4zAH5o4cDLOlIQC4arrc3BtXgI1B9EhStZVqQqpy8zZHHBs3xs6f/RC1KnywjhlnQGoLTCsR8eTGHgJ+0mzhqhWJDYIazIVprlMK1VT2epJ68rf2O70dILjmXpugnycgtL1lehuaz4JjH4/1RqgJh9ep6B7WDXWnj5FDKqIapks3VDNKXgGi2c8HltwdClumHItUDaS2mBW+YSdFjfpPpLFP1rWUcVUba+FWKHQQ+RrXfj0k/W0ZncRPbsbH8+k4joB2XgD2xC5sJxVz00ZlSmtQgtZXpl5pbj36847qGhATaqOP22jHJnWRU00RbjocNs8kmgXXC6t+Ok3GqbhODKMyTJzPaMi/KYuALA5YlkJNEdvOKNIQlURuZT5kPFPB+6Y9RsLNCw="
