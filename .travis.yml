dist: trusty
sudo: required
language: java
jdk:
- oraclejdk8
git:
  depth: 3
cache:
  directories:
  - "$HOME/.m2"
services:
- postgresql
before_script:
- psql -c 'create database frameworkeventstore;' -U postgres
- psql -c 'create database frameworkviewstore;' -U postgres
- psql -c 'create database frameworkfilestore;' -U postgres
- psql -c 'create database frameworkjobstore;' -U postgres
- psql -c "CREATE USER framework WITH PASSWORD 'framework';" -U postgres
addons:
  postgresql: '9.5'
  sonarcloud:
    organization: cjscommonplatform
    token:
      secure: kWIWXeIqoufErWB9tBeLH0dTTTOdcmb9MdXCP60kzYHMwuUdZZUJ+dmRzqzIdiC19V2KAM1S3c/INhx+G32Vwy09MEXzENW/dunI9d73lgEU7bAD7EjqTYwj1YJeGp8xqJW6vfVQRxeABYw2StlxXeUUnpA6wQx34Hq+bH++5fcQSMt0etfvMTGA/CAtoTM4xTyz7efW3JQzFi5LAXC3kdC7rs3UXQ+lI5ulE+OAOn/2DCU2irV0EtM9/kVw6CvOY8VihRRZISn6mtwKQK4KpCFdfk6945avV15dn6bChVNmUmRGm+1uoIPTzGU8d4Hocjt2YAj0n6BhHQGlXmmShvw5pVisCDTdyMa493or0szajSUoXcEBduC43e1lY4sRmDIF0HF3zgfTthCO7dw1VqCgreBlu+a3cfXCBSdZozBgprjhCb6GwMUqnP39s7t+8wNvHJk8xFFQ2nVAmcTTP/5mwPyguTMrZUjvMjBfDoI8W3iSBBFASdYndXX1dBeXdbxvwY6QWuWdShhPf+sFdyjWVyu9EmAb2tsdEh1lF9xP5ijpr801BHLK1OSI77I7LEoCgOagiRHyejtUgTlmZR/6gmvI17aFk20SGVJnqx6qm9kFVVx65mJU+Kvh4xK1fp+3EzaQ7YHvaGrZVoOUD4+jju/yco+cSIbo7HXaORo=
    github_token:
      secure: Dpi/pKUQjjqNQir58UzXvz7Clq/1IYy96lDLebH53xq2n0N2JWe80ES8hOqZVUuHC6tIVtsmkdzxpQy/02HZg4z5Y37RadRJsQE41o4zZh4+9LVnHNDPMdzn/+4tPiMJkB5IitcYcqdniFSilgj5QNDJPE7lwWOQKXGbU09SZmzd+2C0DksSiyAX1FzjaRC6YM5PAfY3zz8UxyYQKmcQN3OJk5/FICoxT+tsaDU2ZQNmU8dtSGS7+UYjehutDpVkbJkM2N12NiRGzZpnlEOsB1sUrM+EGE7VTi3etwJteu7lqXbZWwprxCker1veHnvUYpCbqmkx6yBcUsvEoDBqN5HxpDxhgfxxnaHtBT4u0/CYkeOe0x7fo4tPdWvNdXygo9TRx8+PbGmydakogNbmxhNYlWJMZsqaeB5XN6rKPCX6VYEBwrSElDgwuBxFneEXLl5g86r4KW8/k8upXnLiTmJvSx2RTNlig4WoaPOgtPHebpWetDd7Jw7qRHBKbdq/VObAwVkM8Zugl7gJ3oUBuLCjQvgFRPYx6z/ZLlsfqVR9lp+4wobFA5Rb2HBj5OEWwZqjOVOSprxm6g1pBSynQFtRy7RYUNNNNlce2RMUaXeY7rS+lvX6gJMQqbw/UpRtoXT8GTRgHO60IXYEP+BkBIH/Xp6Dg/jqtzeoY4lxwH0=
before_install:
- git clone https://github.com/CJSCommonPlatform/travis-settings.git target/travis-settings
- ln -sfT ${PWD}/target/travis-settings/settings.xml ${HOME}/.m2/settings.xml
- ln -sfT ${PWD}/target/travis-settings/mvnw mvnw
- ln -sft ${PWD} ${PWD}/target/travis-settings/.mvn
install: "${PWD}/target/travis-settings/java/install.sh -e -q -DexcludeGroupIds=uk.gov.justice.service,uk.gov.justice.services"
script: "${PWD}/target/travis-settings/java/script-install.sh coveralls:report sonar:sonar"
after_success: "${PWD}/target/travis-settings/java/after_success.sh"
env:
  global:
  - PGPORT=5432
  - secure: pDzf0vcrsbhOXdOBWrObRl6eJmQFGS5wxDgIoiVhf/P7g68b0mzE3NCQRcFpPDlDJtY9hgb5mx4e/gEPdml/joi83AKTUz+drk6efYLJJ1+wLsL4Xm2USOlmlGARp4Wj8+kP4vjOiHUn5uGpEhWa2YCSUOjxXcF/gO3DThaU6BPGxvOCewj3fHOxB72CtZfaITd39qe2HtzCjRvJgFi4C+bqrDXu/CwuvqrnoxGEQk2rpiBge/hlNkdEPb4WwS6iE3pu3qVQj2bCjBSGH9dWh5qkHBFpqjTA2tHznmRVfaZ7xCnPQon9qN4/3M11rfpVnIyJAXWQA5rN6SUvgd0Uv5lRNqF6PlfwyOpBrk0eKbtqmY6dnRq+90mipSE/viD0iOZA1uwZprme9ImPpj8j4jnYPscT03nqV0Rbhbkj4OMzj6fQlHClPBvGfo+wXrzqj/wtE2+3D3Pc7TEGV7TaiXGHSeelEbw/J44pBk6q2ANYXmYPFjBHKthKjCrDEWc8ug0jj1KGMTmjwHGCjlY5Drh8nSKr0KYWRqeGQhReG92rVNIIlYP009ixK9nfx10nD1RcyZ3dPffzTOTIu3pXVNZWPv9LlC9Na2Gr8a+71muf/Xjj9eFK2cExOO0H83HAoJBM8SOtq/ldUhxdmDTqRfzdT0ZmKjEiK4oNdCOPfwo=
  - secure: nHIN+izRRHAauzc4XXvP/X4Ep9z3FSGJsyR83/5AA5BILzi2fzm4tfZD0IopQLmxOGLSQh4Ogr3VBDwyoJ5PlspW+84KJAu3dOKQyISlceHPNdhE54cWllpapqsGqp50rdwfu+nHmDXGdTGU0sGmVC3qjYDRSAns6qg8edg/feqei35ldj5iIV/0Mr6T835GjrJL9P2lAjFxVnW5CcoFQVbj+7IjSDclInxcBPJn5VOhVXBvBC1zTfINVtMjJ7mDXuLYKqCBBaXEg2bbELZ0wbDqn5Q8w8WvGs4wX48wvDb4qavYGqC4bEuQ541BCGdiA78DRxABpX3RrSrMhoMX+JMhjCUsgO+MNl8/09yegEbl2Ukmw47kq849nYhnENITpICG0eYIVfnYb4T79nv/mZIOjCt517IGCqyahVkNzBfdWcMDC2RhIWtoSqOMEKf6+e643aWXDVHTDBelewNcluUGBigCwzTyPzy472Fp9pJOumSAb9AWLaJZUNt8CxV1Jt/vyEX7MYJDmHjfQDvJRjZ1Z2DsykL0zm0/4cGX9SrRsAJ7Uv6KDj/hOy8Xa1/bZ+NZYJO7CVoI2kPJHhosYMSE21O+u5BauC4tBJFnjULkygSbHtJtURTW1g7yfy8V8a3Wj9IEr3zhgn+wpt91JHlQgaS9wx2SjTk0cnW3XJo=
  - secure: hYHlIAYqcITBBodI+atkuaFtc4yXbAE9Nc6/TBP7bNsbxplc/64+R46QbhTRrxxw/0oycAutgYFfog0WpFc4uT2jNjIQAO2PtrBg34aiMPE/xIElMDIIrCKA7gLJriBKB2ohqXjD2IjVwfAPx8niM69d5CkShsMGz9Ri0hnlLRK+58h7wW0QksXu0JPkD+K2SXjhGMnJCfprceexSqqJLZsjjNGoxQD8eItHCPdNP7SiGu0zgkqEbZ31fR1ZglrRWSgtpbkMsDr7Pl2UzkcP4RF/OGD23a0ZfH1sNAONaF8TQ1R3IUg6E9zIbrwoK0TRPg/wlRtqrLecWZa/+UFKxWdCsCcMzt5ZU6CoGBbWM/hAKxJqLLgzWY2ncDsesqKqNJYD9M246DU4hAa6vhLFEkY2TsYwBjXV45p+y6pALsC8F09gdFCSrH0+71MNV8v25wAZMwlH5/riBPJsW0pZqf4K5vnTLqiDPKs1nA6A7oI274TAbwRViUm7k95cGkTOxGhqayLTMs6JFlYYzi8gC2xnI506ydpYZA8s2G9ddrMiEhT6sOkRhGar47Q66rPfhqH11RhLz6SjhcDfFvFDnIrhN21JRT7f5jM/TyUKOV5Kmr2ThLdSQt2laVeSphVhblTTL5F8e/ewXyZ314D6D9FGxDAGDZd4/4DKQ5QbUxw=
  - secure: c1dlEGTc73iSiJVVz8b4/FSdR/d44MilzoCYl+oaEyUiT9+kKEhfzJQIfZZToSnlCROh9yE7ZP+kLC4f/efPNb/RXPIU+CL9OWx6S6xLuhotaHfKR3OCBI1rdNCsOCyrEFmv+G96g6x/hpZkH+eWOAGTEVNSR1cMBExSUzQHGNp/nzC47ZEjfTzLzCHULXnemS41mb3no7ceUMzvDCeca6FVFAMpEzc6QTKoSJfbe9wIbbkPRR3Fmpc3xmX5sHgtwSuryMp/XyTrQDF04CcT+MYLQieQI1AOztiBRa2uuvcbeI8eX5AUyMHR4N5iL8IGSHs/oDA7OohdIa8l4pZWwVU2OTAhAWn+k4wPWN77jIbvBAVdtWzjx0NiV5a9gPFrzo38e9TlyTxN9NVUC4A+xfjcIOkmNo94Ujl8e0uEMZYD/H7GaB/9Q/UtmZaIauw2t+SA7wKMw5iTUOvN68H6wwHHy7y3SKKQQ1pTyvYuG1+Ft1xRB6s0702rF1RX0uXcyVntpS8U89IMqg3bKmbVDPS27TdKriIFnBPQtWiXkoOEhYvrATKfJ0CmYioCMCNlx+VlOH09s8fhxKdRYXQbYHhRtYRj/ZQoaYVSC/DleMLSlmGNdt6TPLvMgaiVe3AA/JxPEr7ezrf09csXBdE52E4MeNhnfbPeiaOKZRGHCtY=
