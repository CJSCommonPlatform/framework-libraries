<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>uk.gov.justice</groupId>
        <artifactId>maven-parent-pom</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <artifactId>maven-framework-parent-pom</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>Framework parent POM</name>
    <description>Parent POM for the Microservices framework</description>
    <properties>

        <!-- Minimum version of Maven required to build the project -->
        <maven.minimum.version>3.1.0</maven.minimum.version>

        <!-- Enforcer settings - ranges need to be in the format defined at http://maven.apache.org/enforcer/enforcer-rules/versionRanges.html -->
        <enforcer.maven.version.range>[${maven.minimum.version},)</enforcer.maven.version.range>
        <enforcer.java.version.range>[1.8,)</enforcer.java.version.range>


        <!-- Java API versions targeted -->
        <java.se.version>8</java.se.version>
        <java.ee.version>7</java.ee.version>
        <javaee-api.version>7.0</javaee-api.version>

        <!-- Compilation properties -->
        <compiler.source>1.8</compiler.source>
        <compiler.target>1.8</compiler.target>
        <compiler.debug>true</compiler.debug>
        <compiler.debuglevel>lines,vars,source</compiler.debuglevel>
        <compiler.showdeprecation>true</compiler.showdeprecation>
        <compiler.showwarnings>true</compiler.showwarnings>
        <compiler.optimise>true</compiler.optimise>
        <compiler.max.errors>100</compiler.max.errors>
        <compiler.max.warnings>100</compiler.max.warnings>

        <!-- Maven and 3rd party plugin versions -->
        <plugins.maven.enforcer.version>1.4.1</plugins.maven.enforcer.version>

        <plugins.maven.clean.version>3.0.0</plugins.maven.clean.version>
        <plugins.maven.compiler.version>3.5.1</plugins.maven.compiler.version>
        <plugins.maven.dependency.version>2.10</plugins.maven.dependency.version>
        <plugins.maven.deploy.version>2.8.2</plugins.maven.deploy.version>
        <plugins.maven.install.version>2.5.2</plugins.maven.install.version>
        <plugins.maven.jar.version>2.6</plugins.maven.jar.version>
        <plugins.maven.resources.version>2.7</plugins.maven.resources.version>
        <plugins.maven.site.version>3.4</plugins.maven.site.version>

        <plugins.maven.wagon.version>2.10</plugins.maven.wagon.version>
        <plugins.maven.war.version>2.6</plugins.maven.war.version>
        <plugins.versions.version>2.2</plugins.versions.version>
        <liquibase.version>3.4.2</liquibase.version>
        <plugins.maven.shade.version>2.4.3</plugins.maven.shade.version>

        <plugins.buildnumber.version>1.4</plugins.buildnumber.version>
        <plugins.buildhelper.version>1.10</plugins.buildhelper.version>
        <plugins.coveralls.version>4.2.0</plugins.coveralls.version>

        <!-- testing -->
        <plugins.maven.surefire.version>2.19.1</plugins.maven.surefire.version>
        <plugins.maven.failsafe.version>2.19.1</plugins.maven.failsafe.version>
        <plugins.maven.processor.version>3.1.0</plugins.maven.processor.version>

        <!-- Javadoc links to Java APIs -->
        <javadoc.java.link>http://download.oracle.com/javase/${java.se.version}/docs/api/
        </javadoc.java.link>
        <javadoc.javaee.link>http://download.oracle.com/javaee/${java.ee.version}/api/
        </javadoc.javaee.link>
        <javadoc.javamail.link>http://javamail.kenai.com/nonav/javadocs/</javadoc.javamail.link>

        <plugins.maven.wildfly.version>1.0.2.Final</plugins.maven.wildfly.version>
        <plugins.maven.wildfly.skip>true</plugins.maven.wildfly.skip>

        <plugins.jacoco.version>0.7.5.201505241946</plugins.jacoco.version>

        <cpp.scm.git.url>git@github.com:CJSCommonPlatform/maven-framework-parent-pom.git</cpp.scm.git.url>
        <cpp.scm.connection>scm:git:${cpp.scm.git.url}/</cpp.scm.connection>
        <cpp.scm.developerConnection>${project.scm.connection}</cpp.scm.developerConnection>
        <cpp.scm.url>https://github.com/CJSCommonPlatform/maven-framework-parent-pom</cpp.scm.url>
    </properties>

    <scm>
        <connection>${cpp.scm.connection}</connection>
        <developerConnection>${cpp.scm.developerConnection}</developerConnection>
        <url>${cpp.scm.url}</url>
    </scm>

    <!--
    =============
    PREREQUISITES
    =============
    -->

    <prerequisites>
        <maven>${maven.minimum.version}</maven>
    </prerequisites>


    <!--
    =====
    BUILD
    =====
    -->

    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
            <resource>
                <directory>${project.build.directory}/generated-resources</directory>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
            </testResource>
            <testResource>
                <directory>${project.build.directory}/generated-test-resources</directory>
            </testResource>
        </testResources>

        <!-- Default plugin versions and management -->
        <pluginManagement>
            <plugins>

                <!-- WildFly plugin to deploy war -->
                <plugin>
                    <groupId>org.wildfly.plugins</groupId>
                    <artifactId>wildfly-maven-plugin</artifactId>
                    <version>${plugins.maven.wildfly.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>${plugins.maven.surefire.version}</version>
                    <configuration>
                        <useSystemClassLoader>false</useSystemClassLoader>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-report-plugin</artifactId>
                    <version>${plugins.maven.surefire.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <version>${plugins.maven.failsafe.version}</version>
                    <executions>
                        <execution>
                            <id>integration-test</id>
                            <goals>
                                <goal>integration-test</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>verify</id>
                            <goals>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>${plugins.maven.clean.version}</version>
                </plugin>

                <!-- Add more properties to the Java compilation - http://maven.apache.org/plugins/maven-compiler-plugin/ -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>${plugins.maven.compiler.version}</version>
                    <!-- Configuration reference - http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html -->
                    <configuration>
                        <source>${compiler.source}</source>
                        <target>${compiler.target}</target>
                        <debug>${compiler.debug}</debug>
                        <debuglevel>${compiler.debuglevel}</debuglevel>
                        <showDeprecation>${compiler.showdeprecation}</showDeprecation>
                        <showWarnings>${compiler.showwarnings}</showWarnings>
                        <optimize>${compiler.optimise}</optimize>
                        <compilerArguments>
                            <Xmaxerrs>${compiler.max.errors}</Xmaxerrs>
                            <Xmaxwarns>${compiler.max.warnings}</Xmaxwarns>
                            <Xlint/>
                            <parameters/>
                        </compilerArguments>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>${plugins.maven.deploy.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>${plugins.maven.install.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>${plugins.maven.jar.version}</version>
                    <configuration>
                        <archive>
                            <manifest>
                                <addDefaultImplementationEntries>true
                                </addDefaultImplementationEntries>
                                <addDefaultSpecificationEntries>true
                                </addDefaultSpecificationEntries>
                            </manifest>
                            <manifestEntries>
                                <Build-Date>${ci.buildTimestamp}</Build-Date>
                            </manifestEntries>
                            <manifestSections>
                                <manifestSection>
                                    <name>SCM</name>
                                    <manifestEntries>
                                        <Scm-Type>Git</Scm-Type>
                                        <Scm-Revision>${git.revision}</Scm-Revision>
                                        <Scm-Branch>${git.branch}</Scm-Branch>
                                        <Scm-Url>${git.url}</Scm-Url>
                                    </manifestEntries>
                                </manifestSection>
                                <manifestSection>
                                    <name>CI</name>
                                    <manifestEntries>
                                        <CI-Type>${ci.type}</CI-Type>
                                        <CI-Build>${ci.build}</CI-Build>
                                        <CI-BuildNode>${ci.buildNode}</CI-BuildNode>
                                        <CI-BuildTimestamp>${ci.buildTimestamp}</CI-BuildTimestamp>
                                        <CI-BuildUrl>${ci.buildUrl}</CI-BuildUrl>
                                        <CI-BuildTag>${ci.buildTag}</CI-BuildTag>
                                        <CI-BuiltBy>${ci.builtBy}</CI-BuiltBy>
                                        <CI-Job>${ci.job}</CI-Job>
                                        <CI-JobUrl>${ci.jobUrl}</CI-JobUrl>
                                        <CI-MavenVersion>${maven.version}</CI-MavenVersion>
                                    </manifestEntries>
                                </manifestSection>
                            </manifestSections>
                        </archive>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>${plugins.maven.javadoc.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>${plugins.maven.assembly.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>${plugins.maven.resources.version}</version>
                    <executions>
                        <execution>
                            <id>copy-json-test-resources</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>copy-resources</goal>
                            </goals>
                            <configuration>
                                <outputDirectory>${basedir}/target/generated-test-resources/json
                                </outputDirectory>
                                <resources>
                                    <resource>
                                        <directory>src/raml/json</directory>
                                        <filtering>true</filtering>
                                    </resource>
                                </resources>
                            </configuration>
                        </execution>
                        <execution>
                            <id>copy-json-schema-resources</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>copy-resources</goal>
                            </goals>
                            <configuration>
                                <outputDirectory>${basedir}/target/generated-resources/json/schema
                                </outputDirectory>
                                <resources>
                                    <resource>
                                        <directory>src/raml/json/schema</directory>
                                        <filtering>true</filtering>
                                    </resource>
                                </resources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-site-plugin</artifactId>
                    <version>${plugins.maven.site.version}</version>
                    <dependencies>
                        <!-- Add support for SSH/ SCP and FTP -->
                        <dependency>
                            <groupId>org.apache.maven.wagon</groupId>
                            <artifactId>wagon-ftp</artifactId>
                            <version>${plugins.maven.wagon.version}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.apache.maven.wagon</groupId>
                            <artifactId>wagon-ssh</artifactId>
                            <version>${plugins.maven.wagon.version}</version>
                        </dependency>
                    </dependencies>
                </plugin>

                <!-- Make sure the generated web.xml is added to the WAR and not the default one -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>${plugins.maven.war.version}</version>
                    <configuration>
                        <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
                        <!-- Java EE 7 doesn't require web.xml, Maven needs to catch up! -->
                        <failOnMissingWebXml>false</failOnMissingWebXml>
                        <archive>
                            <manifest>
                                <addClasspath>true</addClasspath>
                                <addDefaultImplementationEntries>true
                                </addDefaultImplementationEntries>
                                <addDefaultSpecificationEntries>true
                                </addDefaultSpecificationEntries>
                            </manifest>
                            <manifestEntries>
                                <Build-Date>${maven.build.timestamp}</Build-Date>
                            </manifestEntries>
                            <manifestSections>
                                <manifestSection>
                                    <name>SCM</name>
                                    <manifestEntries>
                                        <Scm-Type>Git</Scm-Type>
                                        <Scm-Revision>${git.revision}</Scm-Revision>
                                        <Scm-Branch>${git.branch}</Scm-Branch>
                                        <Scm-Url>${git.url}</Scm-Url>
                                    </manifestEntries>
                                </manifestSection>
                                <manifestSection>
                                    <name>CI</name>
                                    <manifestEntries>
                                        <CI-BuildNode>${ci.buildNode}</CI-BuildNode>
                                        <CI-BuildTimestamp>${maven.build.timestamp}
                                        </CI-BuildTimestamp>
                                        <CI-BuildUrl>${project.baseUri}</CI-BuildUrl>
                                        <CI-BuiltBy>${user.name}</CI-BuiltBy>
                                        <CI-MavenVersion>${maven.version}</CI-MavenVersion>
                                    </manifestEntries>
                                </manifestSection>
                            </manifestSections>
                        </archive>
                    </configuration>
                </plugin>

                <!-- Only used when _not_ running a CI build -->
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>buildnumber-maven-plugin</artifactId>
                    <version>${plugins.buildnumber.version}</version>
                    <executions>
                        <execution>
                            <id>buildnumber-git</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>create</goal>
                            </goals>
                            <configuration>
                                <buildNumberPropertyName>git.revision</buildNumberPropertyName>
                                <scmBranchPropertyName>git.branch</scmBranchPropertyName>
                                <timestampPropertyName>git.timestamp</timestampPropertyName>
                            </configuration>
                        </execution>
                    </executions>
                    <configuration>
                        <doCheck>false</doCheck>
                        <doUpdate>false</doUpdate>
                        <getRevisionOnlyOnce>true</getRevisionOnlyOnce>
                        <revisionOnScmFailure>UNKNOWN</revisionOnScmFailure>
                        <shortRevisionLength>7</shortRevisionLength>
                        <useLatestCommittedRevision>false</useLatestCommittedRevision>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>${plugins.buildhelper.version}</version>
                    <executions>
                        <execution>
                            <id>maven-version</id>
                            <goals>
                                <goal>maven-version</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                    <version>${plugins.maven.shade.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.eluder.coveralls</groupId>
                    <artifactId>coveralls-maven-plugin</artifactId>
                    <version>${plugins.coveralls.version}</version>
                </plugin>

                <plugin>
                    <groupId>org.liquibase</groupId>
                    <artifactId>liquibase-maven-plugin</artifactId>
                    <version>${liquibase.version}</version>
                </plugin>

                <plugin>
                    <groupId>com.edugility</groupId>
                    <artifactId>h2-maven-plugin</artifactId>
                    <version>1.0</version>
                    <dependencies>
                        <dependency>
                            <groupId>com.h2database</groupId>
                            <artifactId>h2</artifactId>
                            <version>${h2.version}</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <groupId>org.bsc.maven</groupId>
                    <artifactId>maven-processor-plugin</artifactId>
                    <version>${plugins.maven.processor.version}</version>
                    <executions>
                        <execution>
                            <id>process</id>
                            <goals>
                                <goal>process</goal>
                            </goals>
                            <phase>generate-sources</phase>
                            <configuration>
                                <processors>
                                    <processor>
                                        org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor
                                    </processor>
                                </processors>
                            </configuration>
                        </execution>
                    </executions>
                    <dependencies>
                        <dependency>
                            <groupId>org.hibernate</groupId>
                            <artifactId>hibernate-jpamodelgen</artifactId>
                            <version>${hibernate.version}</version>
                        </dependency>
                    </dependencies>
                </plugin>

            </plugins>

        </pluginManagement>

        <!-- Plugin configuration -->
        <plugins>


            <!-- Copy dependencies - http://maven.apache.org/plugins/maven-dependency-plugin/ -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>${plugins.maven.dependency.version}</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <!-- Exclude test and provided dependencies. First comment here explains why done this way: http://jira.codehaus.org/browse/MDEP-128 -->
                            <includeScope>runtime</includeScope>
                            <excludeScope>provided</excludeScope>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>${plugins.maven.enforcer.version}</version>
                <executions>
                    <execution>
                        <id>enforce-rules</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <!--Available rules - http://maven.apache.org/enforcer/enforcer-rules/-->
                            <rules>
                                <requireJavaVersion>
                                    <version>${enforcer.java.version.range}</version>
                                </requireJavaVersion>
                                <requireMavenVersion>
                                    <version>${enforcer.maven.version.range}</version>
                                </requireMavenVersion>
                                <requirePluginVersions>
                                    <message>Please define plugin versions</message>
                                </requirePluginVersions>
                                <dependencyConvergence/>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <!-- The WildFly plugin deploys your war to a local WildFly container -->
            <!-- Skip modules by default. To enable a module configure the plugin for that specific module -->
            <!-- To use, run: mvn package wildfly:deploy -->
            <plugin>
                <groupId>org.wildfly.plugins</groupId>
                <artifactId>wildfly-maven-plugin</artifactId>
                <configuration>
                    <skip>${plugins.maven.wildfly.skip}</skip>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
                <version>${plugins.jacoco.version}</version>
                <configuration>
                    <excludes>
                        <exclude>uk/gov/justice/api/*Application.class</exclude>
                        <exclude>uk/gov/justice/api/*JmsListener.class</exclude>
                        <exclude>uk/gov/justice/api/Remote*.class</exclude>
                        <exclude>uk/gov/justice/api/controller/Remote*.class</exclude>
                        <exclude>uk/gov/justice/api/resource/*Resource.class</exclude>
                        <exclude>uk/gov/justice/api/mapper/*ActionMapper.class</exclude>
                        <exclude>entity/*_.class</exclude>
                    </excludes>
                </configuration>
                <executions>
                    <execution>
                        <id>default-prepare-agent</id>
                        <goals>
                            <goal>prepare-agent</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>default-prepare-agent-integration</id>
                        <goals>
                            <goal>prepare-agent-integration</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>default-report</id>
                        <goals>
                            <goal>report</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>default-report-integration</id>
                        <goals>
                            <goal>report-integration</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>default-check</id>
                        <goals>
                            <goal>check</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <!-- implementation is needed only for Maven 2 -->
                                <rule implementation="org.jacoco.maven.RuleConfiguration">
                                    <element>BUNDLE</element>
                                    <limits>
                                        <!-- implementation is needed only for Maven 2 -->
                                        <limit implementation="org.jacoco.report.check.Limit">
                                            <counter>COMPLEXITY</counter>
                                            <value>COVEREDRATIO</value>
                                            <minimum>0.0</minimum>
                                        </limit>
                                    </limits>
                                </rule>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>

    </build>


    <!--
    =======================
    DISTRIBUTION MANAGEMENT
    =======================
    -->

    <!-- NOTHING SET YET -->


    <!--
    =======
    REPORTS
    =======
    -->

    <reporting>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-report-plugin</artifactId>
                <version>${plugins.maven.surefire.version}</version>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>${plugins.maven.surefire.version}</version>
            </plugin>
        </plugins>

    </reporting>


    <!--
    ============
    ORGANISATION
    ============
    -->

    <organization>
        <name>Ministry of Justice</name>
        <url>http://www.justice.gov.uk/</url>
    </organization>

    <!--
    ========
    PROFILES
    ========
    -->

    <profiles>
        <!-- Properties representing Java EE specific API versions -->
        <profile>
            <id>java-ee-7</id>
            <activation>
                <property>
                    <name>java.ee.version</name>
                    <value>7</value>
                </property>
            </activation>
            <properties>
                <ejb.version>3.2</ejb.version>
            </properties>
        </profile>

        <!-- Automatically determine hostname of machine doing build (for injection into Manifest) -->
        <profile>
            <id>windows</id>
            <activation>
                <os>
                    <family>windows</family>
                </os>
            </activation>
            <properties>
                <ci.buildNode>${env.COMPUTERNAME}</ci.buildNode>
            </properties>
        </profile>
        <profile>
            <id>unix</id>
            <activation>
                <os>
                    <family>!windows</family>
                </os>
            </activation>
            <properties>
                <ci.buildNode>${env.HOSTNAME}</ci.buildNode>
            </properties>
        </profile>

        <!-- Release profile - builds JAR of source code and Javadocs. Usage: mvn -Prelease -->
        <profile>
            <id>release</id>
            <build>
                <plugins>

                    <!-- Install source files with artifact - http://maven.apache.org/plugins/maven-source-plugin/usage.html -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-source-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-sources</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>jar-no-fork</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Install Javadocs with artifact - http://maven.apache.org/plugins/maven-javadoc-plugin/ -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-javadoc-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>attach-javadocs</id>
                                <goals>
                                    <goal>jar</goal>
                                </goals>
                                <configuration>
                                    <detectLinks/>
                                    <links>
                                        <link>${javadoc.java.link}</link>
                                        <link>${javadoc.javamail.link}</link>
                                        <link>${javadoc.javaee.link}</link>
                                    </links>
                                    <quiet>true</quiet>
                                    <source>${compiler.source}</source>
                                    <failOnError>false</failOnError>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                </plugins>
            </build>
        </profile>

        <profile>
            <id>raml-jar</id>
            <activation>
                <file>
                    <exists>src/raml</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-jar-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>raml</id>
                                <goals>
                                    <goal>jar</goal>
                                </goals>
                                <phase>package</phase>
                                <configuration>
                                    <classifier>raml</classifier>
                                    <classesDirectory>${project.basedir}/src</classesDirectory>
                                    <includes>
                                        <include>raml/**</include>
                                    </includes>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>liquibase-jar</id>
            <activation>
                <file>
                    <exists>src/main/resources/liquibase.properties</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.liquibase</groupId>
                        <artifactId>liquibase-maven-plugin</artifactId>
                        <configuration>
                            <propertyFile>src/main/resources/liquibase.properties</propertyFile>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jar-plugin</artifactId>
                        <configuration>
                            <archive>
                                <manifest>
                                    <addClasspath>true</addClasspath>
                                    <mainClass>liquibase.integration.commandline.Main</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-shade-plugin</artifactId>
                        <configuration>
                            <dependencyReducedPomLocation>
                                ${project.build.directory}/dependency-reduced-pom.xml
                            </dependencyReducedPomLocation>
                        </configuration>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>shade</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>

            <dependencies>
                <dependency>
                    <groupId>org.liquibase</groupId>
                    <artifactId>liquibase-core</artifactId>
                    <version>${liquibase.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.postgresql</groupId>
                    <artifactId>postgresql</artifactId>
                    <version>${postgresql.driver.version}</version>
                </dependency>
            </dependencies>
        </profile>

    </profiles>

</project>